(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();const Ge=(e,r)=>e===r,oe={equals:Ge};let Me=Oe;const D=1,ie=2,Le={owned:null,cleanups:null,context:null,owner:null};var T=null;let he=null,$=null,C=null,U=null,ae=0;function Ue(e,r){const t=$,n=T,o=e.length===0,i=o?Le:{owned:null,cleanups:null,context:null,owner:r===void 0?n:r},a=o?e:()=>e(()=>fe(()=>ue(i)));T=i,$=null;try{return ee(a,!0)}finally{$=t,T=n}}function me(e,r){r=r?Object.assign({},oe,r):oe;const t={value:e,observers:null,observerSlots:null,comparator:r.equals||void 0},n=o=>(typeof o=="function"&&(o=o(t.value)),_e(t,o));return[Ae.bind(t),n]}function Z(e,r,t){const n=Pe(e,r,!1,D);ce(n)}function Be(e,r,t){t=t?Object.assign({},oe,t):oe;const n=Pe(e,r,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=t.equals||void 0,ce(n),Ae.bind(n)}function fe(e){if($===null)return e();const r=$;$=null;try{return e()}finally{$=r}}function Ae(){if(this.sources&&this.state)if(this.state===D)ce(this);else{const e=C;C=null,ee(()=>se(this),!1),C=e}if($){const e=this.observers?this.observers.length:0;$.sources?($.sources.push(this),$.sourceSlots.push(e)):($.sources=[this],$.sourceSlots=[e]),this.observers?(this.observers.push($),this.observerSlots.push($.sources.length-1)):(this.observers=[$],this.observerSlots=[$.sources.length-1])}return this.value}function _e(e,r,t){let n=e.value;return(!e.comparator||!e.comparator(n,r))&&(e.value=r,e.observers&&e.observers.length&&ee(()=>{for(let o=0;o<e.observers.length;o+=1){const i=e.observers[o],a=he&&he.running;a&&he.disposed.has(i),(a?!i.tState:!i.state)&&(i.pure?C.push(i):U.push(i),i.observers&&Te(i)),a||(i.state=D)}if(C.length>1e6)throw C=[],new Error},!1)),r}function ce(e){if(!e.fn)return;ue(e);const r=T,t=$,n=ae;$=T=e,De(e,e.value,n),$=t,T=r}function De(e,r,t){let n;try{n=e.fn(r)}catch(o){return e.pure&&(e.state=D,e.owned&&e.owned.forEach(ue),e.owned=null),e.updatedAt=t+1,Ne(o)}(!e.updatedAt||e.updatedAt<=t)&&(e.updatedAt!=null&&"observers"in e?_e(e,n):e.value=n,e.updatedAt=t)}function Pe(e,r,t,n=D,o){const i={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:r,owner:T,context:null,pure:t};return T===null||T!==Le&&(T.owned?T.owned.push(i):T.owned=[i]),i}function je(e){if(e.state===0)return;if(e.state===ie)return se(e);if(e.suspense&&fe(e.suspense.inFallback))return e.suspense.effects.push(e);const r=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ae);)e.state&&r.push(e);for(let t=r.length-1;t>=0;t--)if(e=r[t],e.state===D)ce(e);else if(e.state===ie){const n=C;C=null,ee(()=>se(e,r[0]),!1),C=n}}function ee(e,r){if(C)return e();let t=!1;r||(C=[]),U?t=!0:U=[],ae++;try{const n=e();return Ie(t),n}catch(n){t||(U=null),C=null,Ne(n)}}function Ie(e){if(C&&(Oe(C),C=null),e)return;const r=U;U=null,r.length&&ee(()=>Me(r),!1)}function Oe(e){for(let r=0;r<e.length;r++)je(e[r])}function se(e,r){e.state=0;for(let t=0;t<e.sources.length;t+=1){const n=e.sources[t];if(n.sources){const o=n.state;o===D?n!==r&&(!n.updatedAt||n.updatedAt<ae)&&je(n):o===ie&&se(n,r)}}}function Te(e){for(let r=0;r<e.observers.length;r+=1){const t=e.observers[r];t.state||(t.state=ie,t.pure?C.push(t):U.push(t),t.observers&&Te(t))}}function ue(e){let r;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),n=e.sourceSlots.pop(),o=t.observers;if(o&&o.length){const i=o.pop(),a=t.observerSlots.pop();n<o.length&&(i.sourceSlots[a]=n,o[n]=i,t.observerSlots[n]=a)}}if(e.owned){for(r=e.owned.length-1;r>=0;r--)ue(e.owned[r]);e.owned=null}if(e.cleanups){for(r=e.cleanups.length-1;r>=0;r--)e.cleanups[r]();e.cleanups=null}e.state=0,e.context=null}function Ne(e){throw e}function ve(e,r){return fe(()=>e(r||{}))}function We(e,r,t){let n=t.length,o=r.length,i=n,a=0,f=0,p=r[o-1].nextSibling,v=null;for(;a<o||f<i;){if(r[a]===t[f]){a++,f++;continue}for(;r[o-1]===t[i-1];)o--,i--;if(o===a){const m=i<n?f?t[f-1].nextSibling:t[i-f]:p;for(;f<i;)e.insertBefore(t[f++],m)}else if(i===f)for(;a<o;)(!v||!v.has(r[a]))&&r[a].remove(),a++;else if(r[a]===t[i-1]&&t[f]===r[o-1]){const m=r[--o].nextSibling;e.insertBefore(t[f++],r[a++].nextSibling),e.insertBefore(t[--i],m),r[o]=t[i]}else{if(!v){v=new Map;let g=f;for(;g<i;)v.set(t[g],g++)}const m=v.get(r[a]);if(m!=null)if(f<m&&m<i){let g=a,S=1,j;for(;++g<o&&g<i&&!((j=v.get(r[g]))==null||j!==m+S);)S++;if(S>m-f){const k=r[a];for(;f<m;)e.insertBefore(t[f++],k)}else e.replaceChild(t[f++],r[a++])}else a++;else r[a++].remove()}}}const be="_$DX_DELEGATE";function qe(e,r,t,n={}){let o;return Ue(i=>{o=i,r===document?e():B(r,e(),r.firstChild?null:void 0,t)},n.owner),()=>{o(),r.textContent=""}}function te(e,r,t){let n;const o=()=>{const a=document.createElement("template");return a.innerHTML=e,t?a.content.firstChild.firstChild:a.content.firstChild},i=r?()=>(n||(n=o())).cloneNode(!0):()=>fe(()=>document.importNode(n||(n=o()),!0));return i.cloneNode=i,i}function Ye(e,r=window.document){const t=r[be]||(r[be]=new Set);for(let n=0,o=e.length;n<o;n++){const i=e[n];t.has(i)||(t.add(i),r.addEventListener(i,He))}}function Fe(e,r,t,n){if(n)Array.isArray(t)?(e[`$$${r}`]=t[0],e[`$$${r}Data`]=t[1]):e[`$$${r}`]=t;else if(Array.isArray(t)){const o=t[0];e.addEventListener(r,t[0]=i=>o.call(e,t[1],i))}else e.addEventListener(r,t)}function B(e,r,t,n){if(t!==void 0&&!n&&(n=[]),typeof r!="function")return le(e,r,n,t);Z(o=>le(e,r(),o,t),n)}function He(e){const r=`$$${e.type}`;let t=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==t&&Object.defineProperty(e,"target",{configurable:!0,value:t}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}});t;){const n=t[r];if(n&&!t.disabled){const o=t[`${r}Data`];if(o!==void 0?n.call(t,o,e):n.call(t,e),e.cancelBubble)return}t=t._$host||t.parentNode||t.host}}function le(e,r,t,n,o){for(;typeof t=="function";)t=t();if(r===t)return t;const i=typeof r,a=n!==void 0;if(e=a&&t[0]&&t[0].parentNode||e,i==="string"||i==="number")if(i==="number"&&(r=r.toString()),a){let f=t[0];f&&f.nodeType===3?f.data=r:f=document.createTextNode(r),t=V(e,t,n,f)}else t!==""&&typeof t=="string"?t=e.firstChild.data=r:t=e.textContent=r;else if(r==null||i==="boolean")t=V(e,t,n);else{if(i==="function")return Z(()=>{let f=r();for(;typeof f=="function";)f=f();t=le(e,f,t,n)}),()=>t;if(Array.isArray(r)){const f=[],p=t&&Array.isArray(t);if(ye(f,r,t,o))return Z(()=>t=le(e,f,t,n,!0)),()=>t;if(f.length===0){if(t=V(e,t,n),a)return t}else p?t.length===0?Ee(e,f,n):We(e,t,f):(t&&V(e),Ee(e,f));t=f}else if(r instanceof Node){if(Array.isArray(t)){if(a)return t=V(e,t,n,r);V(e,t,null,r)}else t==null||t===""||!e.firstChild?e.appendChild(r):e.replaceChild(r,e.firstChild);t=r}else console.warn("Unrecognized value. Skipped inserting",r)}return t}function ye(e,r,t,n){let o=!1;for(let i=0,a=r.length;i<a;i++){let f=r[i],p=t&&t[i];if(f instanceof Node)e.push(f);else if(!(f==null||f===!0||f===!1))if(Array.isArray(f))o=ye(e,f,p)||o;else if(typeof f=="function")if(n){for(;typeof f=="function";)f=f();o=ye(e,Array.isArray(f)?f:[f],Array.isArray(p)?p:[p])||o}else e.push(f),o=!0;else{const v=String(f);p&&p.nodeType===3?(p.data=v,e.push(p)):e.push(document.createTextNode(v))}}return o}function Ee(e,r,t=null){for(let n=0,o=r.length;n<o;n++)e.insertBefore(r[n],t)}function V(e,r,t,n){if(t===void 0)return e.textContent="";const o=n||document.createTextNode("");if(r.length){let i=!1;for(let a=r.length-1;a>=0;a--){const f=r[a];if(o!==f){const p=f.parentNode===e;!i&&!a?p?e.replaceChild(o,f):e.insertBefore(o,t):p&&f.remove()}else i=!0}}else e.insertBefore(o,t);return[o]}function Ve(e){if(e.__esModule)return e;var r=e.default;if(typeof r=="function"){var t=function n(){if(this instanceof n){var o=[null];o.push.apply(o,arguments);var i=Function.bind.apply(r,o);return new i}return r.apply(this,arguments)};t.prototype=r.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}),t}var $e={},ze={get exports(){return $e},set exports(e){$e=e}};(function(e){var r=function(t){var n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(l,s,c){l[s]=c.value},a,f=typeof Symbol=="function"?Symbol:{},p=f.iterator||"@@iterator",v=f.asyncIterator||"@@asyncIterator",m=f.toStringTag||"@@toStringTag";function g(l,s,c){return Object.defineProperty(l,s,{value:c,enumerable:!0,configurable:!0,writable:!0}),l[s]}try{g({},"")}catch{g=function(s,c,h){return s[c]=h}}function S(l,s,c,h){var u=s&&s.prototype instanceof W?s:W,y=Object.create(u.prototype),A=new b(h||[]);return i(y,"_invoke",{value:pe(l,c,A)}),y}t.wrap=S;function j(l,s,c){try{return{type:"normal",arg:l.call(s,c)}}catch(h){return{type:"throw",arg:h}}}var k="suspendedStart",J="suspendedYield",x="executing",I="completed",F={};function W(){}function q(){}function N(){}var K={};g(K,p,function(){return this});var Q=Object.getPrototypeOf,Y=Q&&Q(Q(E([])));Y&&Y!==n&&o.call(Y,p)&&(K=Y);var R=N.prototype=W.prototype=Object.create(K);q.prototype=N,i(R,"constructor",{value:N,configurable:!0}),i(N,"constructor",{value:q,configurable:!0}),q.displayName=g(N,m,"GeneratorFunction");function re(l){["next","throw","return"].forEach(function(s){g(l,s,function(c){return this._invoke(s,c)})})}t.isGeneratorFunction=function(l){var s=typeof l=="function"&&l.constructor;return s?s===q||(s.displayName||s.name)==="GeneratorFunction":!1},t.mark=function(l){return Object.setPrototypeOf?Object.setPrototypeOf(l,N):(l.__proto__=N,g(l,m,"GeneratorFunction")),l.prototype=Object.create(R),l},t.awrap=function(l){return{__await:l}};function H(l,s){function c(y,A,_,O){var P=j(l[y],l,A);if(P.type==="throw")O(P.arg);else{var de=P.arg,X=de.value;return X&&typeof X=="object"&&o.call(X,"__await")?s.resolve(X.__await).then(function(G){c("next",G,_,O)},function(G){c("throw",G,_,O)}):s.resolve(X).then(function(G){de.value=G,_(de)},function(G){return c("throw",G,_,O)})}}var h;function u(y,A){function _(){return new s(function(O,P){c(y,A,O,P)})}return h=h?h.then(_,_):_()}i(this,"_invoke",{value:u})}re(H.prototype),g(H.prototype,v,function(){return this}),t.AsyncIterator=H,t.async=function(l,s,c,h,u){u===void 0&&(u=Promise);var y=new H(S(l,s,c,h),u);return t.isGeneratorFunction(s)?y:y.next().then(function(A){return A.done?A.value:y.next()})};function pe(l,s,c){var h=k;return function(y,A){if(h===x)throw new Error("Generator is already running");if(h===I){if(y==="throw")throw A;return L()}for(c.method=y,c.arg=A;;){var _=c.delegate;if(_){var O=ne(_,c);if(O){if(O===F)continue;return O}}if(c.method==="next")c.sent=c._sent=c.arg;else if(c.method==="throw"){if(h===k)throw h=I,c.arg;c.dispatchException(c.arg)}else c.method==="return"&&c.abrupt("return",c.arg);h=x;var P=j(l,s,c);if(P.type==="normal"){if(h=c.done?I:J,P.arg===F)continue;return{value:P.arg,done:c.done}}else P.type==="throw"&&(h=I,c.method="throw",c.arg=P.arg)}}}function ne(l,s){var c=s.method,h=l.iterator[c];if(h===a)return s.delegate=null,c==="throw"&&l.iterator.return&&(s.method="return",s.arg=a,ne(l,s),s.method==="throw")||c!=="return"&&(s.method="throw",s.arg=new TypeError("The iterator does not provide a '"+c+"' method")),F;var u=j(h,l.iterator,s.arg);if(u.type==="throw")return s.method="throw",s.arg=u.arg,s.delegate=null,F;var y=u.arg;if(!y)return s.method="throw",s.arg=new TypeError("iterator result is not an object"),s.delegate=null,F;if(y.done)s[l.resultName]=y.value,s.next=l.nextLoc,s.method!=="return"&&(s.method="next",s.arg=a);else return y;return s.delegate=null,F}re(R),g(R,m,"Generator"),g(R,p,function(){return this}),g(R,"toString",function(){return"[object Generator]"});function d(l){var s={tryLoc:l[0]};1 in l&&(s.catchLoc=l[1]),2 in l&&(s.finallyLoc=l[2],s.afterLoc=l[3]),this.tryEntries.push(s)}function w(l){var s=l.completion||{};s.type="normal",delete s.arg,l.completion=s}function b(l){this.tryEntries=[{tryLoc:"root"}],l.forEach(d,this),this.reset(!0)}t.keys=function(l){var s=Object(l),c=[];for(var h in s)c.push(h);return c.reverse(),function u(){for(;c.length;){var y=c.pop();if(y in s)return u.value=y,u.done=!1,u}return u.done=!0,u}};function E(l){if(l){var s=l[p];if(s)return s.call(l);if(typeof l.next=="function")return l;if(!isNaN(l.length)){var c=-1,h=function u(){for(;++c<l.length;)if(o.call(l,c))return u.value=l[c],u.done=!1,u;return u.value=a,u.done=!0,u};return h.next=h}}return{next:L}}t.values=E;function L(){return{value:a,done:!0}}return b.prototype={constructor:b,reset:function(l){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(w),!l)for(var s in this)s.charAt(0)==="t"&&o.call(this,s)&&!isNaN(+s.slice(1))&&(this[s]=a)},stop:function(){this.done=!0;var l=this.tryEntries[0],s=l.completion;if(s.type==="throw")throw s.arg;return this.rval},dispatchException:function(l){if(this.done)throw l;var s=this;function c(O,P){return y.type="throw",y.arg=l,s.next=O,P&&(s.method="next",s.arg=a),!!P}for(var h=this.tryEntries.length-1;h>=0;--h){var u=this.tryEntries[h],y=u.completion;if(u.tryLoc==="root")return c("end");if(u.tryLoc<=this.prev){var A=o.call(u,"catchLoc"),_=o.call(u,"finallyLoc");if(A&&_){if(this.prev<u.catchLoc)return c(u.catchLoc,!0);if(this.prev<u.finallyLoc)return c(u.finallyLoc)}else if(A){if(this.prev<u.catchLoc)return c(u.catchLoc,!0)}else if(_){if(this.prev<u.finallyLoc)return c(u.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(l,s){for(var c=this.tryEntries.length-1;c>=0;--c){var h=this.tryEntries[c];if(h.tryLoc<=this.prev&&o.call(h,"finallyLoc")&&this.prev<h.finallyLoc){var u=h;break}}u&&(l==="break"||l==="continue")&&u.tryLoc<=s&&s<=u.finallyLoc&&(u=null);var y=u?u.completion:{};return y.type=l,y.arg=s,u?(this.method="next",this.next=u.finallyLoc,F):this.complete(y)},complete:function(l,s){if(l.type==="throw")throw l.arg;return l.type==="break"||l.type==="continue"?this.next=l.arg:l.type==="return"?(this.rval=this.arg=l.arg,this.method="return",this.next="end"):l.type==="normal"&&s&&(this.next=s),F},finish:function(l){for(var s=this.tryEntries.length-1;s>=0;--s){var c=this.tryEntries[s];if(c.finallyLoc===l)return this.complete(c.completion,c.afterLoc),w(c),F}},catch:function(l){for(var s=this.tryEntries.length-1;s>=0;--s){var c=this.tryEntries[s];if(c.tryLoc===l){var h=c.completion;if(h.type==="throw"){var u=h.arg;w(c)}return u}}throw new Error("illegal catch attempt")},delegateYield:function(l,s,c){return this.delegate={iterator:E(l),resultName:s,nextLoc:c},this.method==="next"&&(this.arg=a),F}},t}(e.exports);try{regeneratorRuntime=r}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}})(ze);var Je={defaultArgs:["./ffmpeg","-nostdin","-y"],baseOptions:{log:!1,logger:()=>{},progress:()=>{},corePath:""}},Ke=(e,r)=>{const t=e._malloc(r.length*Uint32Array.BYTES_PER_ELEMENT);return r.forEach((n,o)=>{const i=e.lengthBytesUTF8(n)+1,a=e._malloc(i);e.stringToUTF8(n,a,i),e.setValue(t+Uint32Array.BYTES_PER_ELEMENT*o,a,"i32")}),[r.length,t]};const Qe="@ffmpeg/ffmpeg",Xe="0.11.6",Ze="FFmpeg WebAssembly version",et="src/index.js",tt="src/index.d.ts",rt={example:"examples"},nt={start:"node scripts/server.js","start:worker":"node scripts/worker-server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js","build:worker":"rimraf dist && webpack --config scripts/webpack.config.worker.prod.js",prepublishOnly:"npm run build",lint:"eslint src",wait:"rimraf dist && wait-on http://localhost:3000/dist/ffmpeg.dev.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:ffmpeg test:node:all","test:node":"node node_modules/mocha/bin/_mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser":"mocha-headless-chrome -a allow-file-access-from-files -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:ffmpeg":"npm run test:browser -- -f ./tests/ffmpeg.test.html"},ot={"./src/node/index.js":"./src/browser/index.js"},it={type:"git",url:"git+https://github.com/ffmpegwasm/ffmpeg.wasm.git"},st=["ffmpeg","WebAssembly","video"],lt="Jerome Wu <jeromewus@gmail.com>",at="MIT",ft={url:"https://github.com/ffmpegwasm/ffmpeg.wasm/issues"},ct={node:">=12.16.1"},ut="https://github.com/ffmpegwasm/ffmpeg.wasm#readme",pt={"is-url":"^1.2.4","node-fetch":"^2.6.1","regenerator-runtime":"^0.13.7","resolve-url":"^0.2.1"},dt={"@babel/core":"^7.12.3","@babel/preset-env":"^7.12.1","@ffmpeg/core":"^0.11.0","@types/emscripten":"^1.39.4","babel-eslint":"^10.1.0","babel-loader":"^8.1.0",chai:"^4.2.0",cors:"^2.8.5",eslint:"^7.12.1","eslint-config-airbnb-base":"^14.1.0","eslint-plugin-import":"^2.22.1",express:"^4.17.1",mocha:"^8.2.1","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","wait-on":"^5.3.0",webpack:"^5.3.2","webpack-cli":"^4.1.0","webpack-dev-middleware":"^4.0.0"},ke={name:Qe,version:Xe,description:Ze,main:et,types:tt,directories:rt,scripts:nt,browser:ot,repository:it,keywords:st,author:lt,license:at,bugs:ft,engines:ct,homepage:ut,dependencies:pt,devDependencies:dt},ht=(typeof process<"u",`https://unpkg.com/@ffmpeg/core@${ke.devDependencies["@ffmpeg/core"].substring(1)}/dist/ffmpeg-core.js`),gt={corePath:ht};let we=!1,Re=()=>{};const mt=e=>{we=e},vt=e=>{Re=e},yt=(e,r)=>{Re({type:e,message:r}),we&&console.log(`[${e}] ${r}`)};var M={logging:we,setLogging:mt,setCustomLogger:vt,log:yt};const wt=e=>`
createFFmpegCore is not defined. ffmpeg.wasm is unable to find createFFmpegCore after loading ffmpeg-core.js from ${e}. Use another URL when calling createFFmpeg():

const ffmpeg = createFFmpeg({
  corePath: 'http://localhost:3000/ffmpeg-core.js',
});
`;var Se={CREATE_FFMPEG_CORE_IS_NOT_DEFINED:wt};const z=async(e,r)=>{M.log("info",`fetch ${e}`);const t=await(await fetch(e)).arrayBuffer();M.log("info",`${e} file size = ${t.byteLength} bytes`);const n=new Blob([t],{type:r}),o=URL.createObjectURL(n);return M.log("info",`${e} blob URL = ${o}`),o},bt=async({corePath:e,workerPath:r,wasmPath:t})=>{if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){if(typeof e!="string")throw Error("corePath should be a string!");const f=new URL(e,import.meta.url).href,p=await z(f,"application/javascript"),v=await z(t!==void 0?t:f.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),m=await z(r!==void 0?r:f.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return typeof createFFmpegCore>"u"?new Promise(g=>{if(globalThis.importScripts(p),typeof createFFmpegCore>"u")throw Error(Se.CREATE_FFMPEG_CORE_IS_NOT_DEFINED(f));M.log("info","ffmpeg-core.js script loaded"),g({createFFmpegCore,corePath:p,wasmPath:v,workerPath:m})}):(M.log("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore,corePath:p,wasmPath:v,workerPath:m}))}if(typeof e!="string")throw Error("corePath should be a string!");const n=new URL(e,import.meta.url).href,o=await z(n,"application/javascript"),i=await z(t!==void 0?t:n.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),a=await z(r!==void 0?r:n.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return typeof createFFmpegCore>"u"?new Promise(f=>{const p=document.createElement("script"),v=()=>{if(p.removeEventListener("load",v),typeof createFFmpegCore>"u")throw Error(Se.CREATE_FFMPEG_CORE_IS_NOT_DEFINED(n));M.log("info","ffmpeg-core.js script loaded"),f({createFFmpegCore,corePath:o,wasmPath:i,workerPath:a})};p.src=o,p.type="text/javascript",p.addEventListener("load",v),document.getElementsByTagName("head")[0].appendChild(p)}):(M.log("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore,corePath:o,wasmPath:i,workerPath:a}))},Ft=e=>new Promise((r,t)=>{const n=new FileReader;n.onload=()=>{r(n.result)},n.onerror=({target:{error:{code:o}}})=>{t(Error(`File could not be read! Code=${o}`))},n.readAsArrayBuffer(e)}),Et=async e=>{let r=e;return typeof e>"u"?new Uint8Array:(typeof e=="string"?/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(e)?r=atob(e.split(",")[1]).split("").map(t=>t.charCodeAt(0)):r=await(await fetch(new URL(e,import.meta.url).href)).arrayBuffer():(e instanceof File||e instanceof Blob)&&(r=await Ft(e)),new Uint8Array(r))},$t=Object.freeze(Object.defineProperty({__proto__:null,defaultOptions:gt,fetchFile:Et,getCreateFFmpegCore:bt},Symbol.toStringTag,{value:"Module"})),xe=Ve($t),{defaultArgs:St,baseOptions:Ct}=Je,Lt=Ke,{defaultOptions:At,getCreateFFmpegCore:_t}=xe,{version:Pt}=ke,ge=Error("ffmpeg.wasm is not ready, make sure you have completed load().");var jt=(e={})=>{const{log:r,logger:t,progress:n,...o}={...Ct,...At,...e};let i=null,a=null,f=null,p=null,v=!1,m=()=>{},g=r,S=n,j=0,k=0,J=!1,x=0;const I=d=>{d==="FFMPEG_END"&&f!==null&&(f(),f=null,p=null,v=!1)},F=(d,w)=>{m({type:d,message:w}),g&&console.log(`[${d}] ${w}`)},W=d=>{const[w,b,E]=d.split(":");return parseFloat(w)*60*60+parseFloat(b)*60+parseFloat(E)},q=(d,w)=>{if(typeof d=="string")if(d.startsWith("  Duration")){const b=d.split(", ")[0].split(": ")[1],E=W(b);w({duration:E,ratio:x}),(j===0||j>E)&&(j=E,J=!0)}else if(J&&d.startsWith("    Stream")){const b=d.match(/([\d.]+) fps/);if(b){const E=parseFloat(b[1]);k=j*E}else k=0;J=!1}else if(d.startsWith("frame")||d.startsWith("size")){const b=d.split("time=")[1].split(" ")[0],E=W(b),L=d.match(/frame=\s*(\d+)/);if(k&&L){const l=parseFloat(L[1]);x=Math.min(l/k,1)}else x=E/j;w({ratio:x,time:E})}else d.startsWith("video:")&&(w({ratio:1}),j=0)},N=({type:d,message:w})=>{F(d,w),q(w,S),I(w)},K=async()=>{if(F("info","load ffmpeg-core"),i===null){F("info","loading ffmpeg-core");const{createFFmpegCore:d,corePath:w,workerPath:b,wasmPath:E}=await _t(o);i=await d({mainScriptUrlOrBlob:w,printErr:L=>N({type:"fferr",message:L}),print:L=>N({type:"ffout",message:L}),locateFile:(L,l)=>{if(typeof window<"u"||typeof WorkerGlobalScope<"u"){if(typeof E<"u"&&L.endsWith("ffmpeg-core.wasm"))return E;if(typeof b<"u"&&L.endsWith("ffmpeg-core.worker.js"))return b}return l+L}}),a=i.cwrap(o.mainName||"proxy_main","number",["number","number"]),F("info","ffmpeg-core loaded")}else throw Error("ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.")},Q=()=>i!==null,Y=(...d)=>{if(F("info",`run ffmpeg command: ${d.join(" ")}`),i===null)throw ge;if(v)throw Error("ffmpeg.wasm can only run one command at a time");return v=!0,new Promise((w,b)=>{const E=[...St,...d].filter(L=>L.length!==0);f=w,p=b,a(...Lt(i,E))})},R=(d,...w)=>{if(F("info",`run FS.${d} ${w.map(b=>typeof b=="string"?b:`<${b.length} bytes binary file>`).join(" ")}`),i===null)throw ge;{let b=null;try{b=i.FS[d](...w)}catch{throw Error(d==="readdir"?`ffmpeg.FS('readdir', '${w[0]}') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')`:d==="readFile"?`ffmpeg.FS('readFile', '${w[0]}') error. Check if the path exists`:"Oops, something went wrong in FS operation.")}return b}},re=()=>{if(i===null)throw ge;p&&p("ffmpeg has exited"),v=!1;try{i.exit(1)}catch(d){F(d.message),p&&p(d)}finally{i=null,a=null,f=null,p=null}},H=d=>{S=d},pe=d=>{m=d},ne=d=>{g=d};return F("info",`use ffmpeg.wasm v${Pt}`),{setProgress:H,setLogger:pe,setLogging:ne,load:K,isLoaded:Q,run:Y,exit:re,FS:R}};const Ot=jt,{fetchFile:Tt}=xe;var Ce={createFFmpeg:Ot,fetchFile:Tt};const Nt=te('<div class="ConvertAudio"><div class="file-convert-button"><button></button></div><div class="preview"><div>Preview (right click to save audio)</div><audio id="track" controls>'),kt=te('<div class="file-progress"><div>'),Rt=e=>{const[r,t]=me(0),n=Ce.createFFmpeg({log:!1}),o=async()=>{const a=e.mimeType,f=e.file;if(f){const{name:p}=f;t(.1),n.isLoaded()||await n.load(),n.setProgress(({ratio:g})=>{t(g)}),n.FS("writeFile",p,await Ce.fetchFile(f)),await n.run("-i",p,`output.${a}`);const v=n.FS("readFile",`output.${a}`),m=document.getElementById("track");m.src=URL.createObjectURL(new Blob([v.buffer],{type:`audio/${a}`}))}},i=()=>r()*100;return(()=>{const a=Nt(),f=a.firstChild,p=f.firstChild,v=f.nextSibling;return p.$$click=o,B(p,()=>`Convert to ${e.mimeType}`),B(a,(()=>{const m=Be(()=>r()<1&&r()>0);return()=>m()&&(()=>{const g=kt(),S=g.firstChild;return Z(()=>`${i()}%`!=null?S.style.setProperty("width",`${i()}%`):S.style.removeProperty("width")),g})()})(),v),Z(m=>{const g=!e.file,S=`${r()>=1?"block":"none"}`;return g!==m._v$&&(p.disabled=m._v$=g),S!==m._v$2&&((m._v$2=S)!=null?v.style.setProperty("display",S):v.style.removeProperty("display")),m},{_v$:void 0,_v$2:void 0}),a})()};Ye(["click"]);const xt=te('<div class="ChooseFile"><div class="file-choose"><input type="file" id="file"><span></div><div class="file-convert-type"><div>Convert to<br><select>'),Gt=te("<option>"),Mt=e=>{const r=["mp4","mp3","wav"];return(()=>{const t=xt(),n=t.firstChild,o=n.firstChild,i=n.nextSibling,a=i.firstChild,f=a.firstChild,p=f.nextSibling,v=p.nextSibling;return Fe(o,"change",e.selectFile),Fe(v,"change",e.updateSelectedMimeType),B(v,()=>r.map(m=>(()=>{const g=Gt();return g.value=m,B(g,m),g})())),t})()};const Ut=te('<div class="app"><div class="title"><h2>Simple audio converter</h2><p>Minimal audio converter app done client side. No uploading to a server required.</p><ol><li>Select an audio file to convert such as a .webm or .wav</li><li>Choose a format to convert to</li><li>Click on the convert button</li><li>Once completed, a preview of the audio file appears</li><li>Use this preview to download your audio file</ol><div class="credit">Audio conversion made possible by <a target="_blank" href="https://ffmpegwasm.netlify.app/">FFMPEG.WASM'),Bt=()=>{const[e,r]=me("mp4"),[t,n]=me(),o=a=>{a.stopPropagation(),a.preventDefault();const f=a.target.value;r(f)},i=a=>{a.stopPropagation(),a.preventDefault();const f=a.target.files[0];n(f)};return(()=>{const a=Ut();return a.firstChild,B(a,ve(Mt,{selectFile:i,updateSelectedMimeType:o}),null),B(a,ve(Rt,{get mimeType(){return e()},get file(){return t()}}),null),a})()},Dt=document.getElementById("root");qe(()=>ve(Bt,{}),Dt);
